<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CognOS v0.1</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap">
    <link rel="manifest" href="/manifest.json">
    <style>
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #8b5cf6;
            --bg: #0f0f1e;
            --card: rgba(25, 25, 45, 0.8);
            --card-border: rgba(99, 102, 241, 0.3);
            --text: #e0e0ff;
            --text-secondary: #a1a1cc;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --glass: rgba(15, 15, 30, 0.7);
            --blur: blur(12px);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
        }

        body {
            background: linear-gradient(135deg, var(--bg) 0%, #1a1a2e 100%);
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
            padding-bottom: 80px;
        }

        /* Glassmorphism effect */
        .glass {
            background: var(--glass);
            backdrop-filter: var(--blur);
            -webkit-backdrop-filter: var(--blur);
            border: 1px solid var(--card-border);
            border-radius: 16px;
            box-shadow: 0 4px 30px rgba(0, 0, 0, 0.1);
        }

        /* Header */
        .header {
            position: sticky;
            top: 0;
            z-index: 100;
            padding: 16px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 700;
            font-size: 1.4rem;
            letter-spacing: -0.5px;
        }

        .logo-icon {
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            width: 36px;
            height: 36px;
            border-radius: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        /* Main layout */
        .app-container {
            max-width: 100%;
            padding: 0 16px;
            margin: 0 auto;
        }

        /* Chat container */
        .chat-container {
            display: flex;
            flex-direction: column;
            height: 65vh;
            margin-bottom: 20px;
        }

        .chat-header {
            padding: 16px;
            border-bottom: 1px solid rgba(99, 102, 241, 0.2);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 16px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .message {
            max-width: 85%;
            padding: 14px 18px;
            border-radius: 18px;
            line-height: 1.5;
            animation: fadeIn 0.3s ease;
            position: relative;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .user-message {
            background: linear-gradient(45deg, var(--primary), var(--primary-dark));
            align-self: flex-end;
            border-bottom-right-radius: 4px;
        }

        .ai-message {
            background: var(--card);
            align-self: flex-start;
            border-bottom-left-radius: 4px;
        }

        .message-tag {
            position: absolute;
            top: -10px;
            right: 12px;
            background: var(--secondary);
            font-size: 0.7rem;
            padding: 3px 8px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        /* Chat input */
        .chat-input-container {
            position: sticky;
            bottom: 0;
            padding: 16px;
            background: rgba(15, 15, 30, 0.9);
        }

        .chat-input {
            display: flex;
            gap: 10px;
        }

        .chat-input input {
            flex: 1;
            padding: 14px 20px;
            border-radius: 50px;
            border: 1px solid rgba(99, 102, 241, 0.3);
            background: rgba(25, 25, 45, 0.7);
            color: var(--text);
            font-size: 1rem;
            outline: none;
            transition: all 0.3s ease;
        }

        .chat-input input:focus {
            border-color: var(--primary);
            box-shadow: 0 0 0 3px rgba(99, 102, 241, 0.3);
        }

        .send-btn {
            background: linear-gradient(45deg, var(--primary), var(--primary-dark));
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .send-btn:hover {
            transform: scale(1.05);
        }

        /* Mind Zones */
        .zones-container {
            padding: 16px;
        }

        .zones-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .zones-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 12px;
        }

        .zone-card {
            padding: 20px 16px;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .zone-card:hover {
            transform: translateY(-5px);
            background: rgba(99, 102, 241, 0.1);
        }

        .zone-icon {
            font-size: 2rem;
            margin-bottom: 10px;
        }

        .zone-title {
            font-weight: 600;
            margin-bottom: 5px;
        }

        .zone-count {
            font-size: 0.8rem;
            color: var(--text-secondary);
        }

        /* Goal Tracker */
        .goal-tracker-btn {
            position: fixed;
            bottom: 100px;
            right: 20px;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            background: linear-gradient(45deg, var(--warning), #f97316);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            cursor: pointer;
            z-index: 90;
            box-shadow: 0 4px 20px rgba(245, 158, 11, 0.3);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(245, 158, 11, 0.5); }
            70% { box-shadow: 0 0 0 12px rgba(245, 158, 11, 0); }
            100% { box-shadow: 0 0 0 0 rgba(245, 158, 11, 0); }
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.7);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .modal.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            width: 90%;
            max-width: 500px;
            padding: 25px;
            border-radius: 20px;
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .modal-title {
            font-size: 1.4rem;
            font-weight: 600;
        }

        .close-btn {
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 1.5rem;
            cursor: pointer;
        }

        .goal-input {
            width: 100%;
            padding: 14px 20px;
            border-radius: 12px;
            border: 1px solid var(--card-border);
            background: var(--card);
            color: var(--text);
            font-size: 1rem;
            margin-bottom: 20px;
            outline: none;
        }

        .steps-container {
            background: var(--card);
            border-radius: 12px;
            padding: 16px;
            margin-top: 20px;
        }

        .step-item {
            display: flex;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .step-item:last-child {
            border-bottom: none;
        }

        .step-checkbox {
            margin-right: 12px;
            width: 20px;
            height: 20px;
            accent-color: var(--success);
        }

        /* Memory timeline */
        .timeline-container {
            margin-top: 30px;
            padding: 16px;
        }

        .timeline-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 16px;
        }

        .timeline-list {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .timeline-item {
            padding: 16px;
            border-radius: 12px;
            display: flex;
            gap: 12px;
            align-items: flex-start;
        }

        .timeline-date {
            font-size: 0.8rem;
            color: var(--text-secondary);
            min-width: 80px;
        }

        .timeline-content {
            flex: 1;
        }

        /* Responsive design */
        @media (min-width: 768px) {
            .app-container {
                max-width: 800px;
            }
            
            .zones-grid {
                grid-template-columns: repeat(5, 1fr);
            }
            
            .chat-container {
                height: 70vh;
            }
        }

        /* Utility classes */
        .btn {
            padding: 10px 20px;
            border-radius: 50px;
            background: linear-gradient(45deg, var(--primary), var(--primary-dark));
            border: none;
            color: white;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(99, 102, 241, 0.4);
        }

        .section-title {
            font-size: 1.2rem;
            font-weight: 600;
            margin-bottom: 16px;
        }

        .tag-selector {
            position: absolute;
            bottom: -10px;
            right: 10px;
            background: var(--card);
            padding: 6px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            gap: 5px;
            cursor: pointer;
            border: 1px solid var(--card-border);
        }

        .tag-selector:hover {
            background: rgba(99, 102, 241, 0.2);
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header glass">
        <div class="logo">
            <div class="logo-icon">C</div>
            <span>CognOS v0.1</span>
        </div>
        <div class="status">AI-Native MindShell</div>
    </div>

    <div class="app-container">
        <!-- Chat Interface -->
        <div class="chat-container glass">
            <div class="chat-header">
                <div>AI Assistant</div>
                <div class="status-indicator"></div>
            </div>
            <div class="chat-messages" id="chat-messages">
                <!-- Messages will be inserted here -->
                <div class="message ai-message">
                    Hello! I'm your CognOS AI assistant. How can I help you organize your thoughts today?
                    <div class="tag-selector">
                        <span>ü§ñ Random</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- Chat Input -->
        <div class="chat-input-container glass">
            <div class="chat-input">
                <input type="text" id="user-input" placeholder="Message CognOS AI...">
                <button class="send-btn" id="send-btn">
                    <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M22 2L11 13" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M22 2L15 22L11 13L2 9L22 2Z" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Mind Zones -->
        <div class="zones-container">
            <div class="zones-header">
                <div class="section-title">Mind Zones</div>
                <div class="view-all">View All</div>
            </div>
            <div class="zones-grid">
                <div class="zone-card glass" data-zone="ideas">
                    <div class="zone-icon">üí°</div>
                    <div class="zone-title">Ideas</div>
                    <div class="zone-count">12 entries</div>
                </div>
                <div class="zone-card glass" data-zone="goals">
                    <div class="zone-icon">üéØ</div>
                    <div class="zone-title">Goals</div>
                    <div class="zone-count">5 entries</div>
                </div>
                <div class="zone-card glass" data-zone="money">
                    <div class="zone-icon">üí∞</div>
                    <div class="zone-title">Money</div>
                    <div class="zone-count">8 entries</div>
                </div>
                <div class="zone-card glass" data-zone="health">
                    <div class="zone-icon">‚ù§Ô∏è</div>
                    <div class="zone-title">Health</div>
                    <div class="zone-count">7 entries</div>
                </div>
                <div class="zone-card glass" data-zone="random">
                    <div class="zone-icon">ü§ñ</div>
                    <div class="zone-title">Random</div>
                    <div class="zone-count">15 entries</div>
                </div>
            </div>
        </div>

        <!-- Memory Timeline -->
        <div class="timeline-container">
            <div class="timeline-header">
                <div class="section-title">Memory Timeline</div>
                <div class="collapse-btn">Collapse</div>
            </div>
            <div class="timeline-list">
                <div class="timeline-item glass">
                    <div class="timeline-date">Today, 10:30 AM</div>
                    <div class="timeline-content">Started morning meditation session</div>
                </div>
                <div class="timeline-item glass">
                    <div class="timeline-date">Today, 9:15 AM</div>
                    <div class="timeline-content">Discussed project timeline with team</div>
                </div>
                <div class="timeline-item glass">
                    <div class="timeline-date">Yesterday, 6:45 PM</div>
                    <div class="timeline-content">Completed workout routine</div>
                </div>
            </div>
        </div>
    </div>

    <!-- Goal Tracker Button -->
    <div class="goal-tracker-btn" id="goal-tracker-btn">
        üéØ
    </div>

    <!-- Goal Tracker Modal -->
    <div class="modal" id="goal-modal">
        <div class="modal-content glass">
            <div class="modal-header">
                <div class="modal-title">GoalTracker AI</div>
                <button class="close-btn" id="close-modal">&times;</button>
            </div>
            <input type="text" class="goal-input" id="goal-input" placeholder="Enter your big goal...">
            <button class="btn" id="generate-steps-btn">Generate Steps</button>
            
            <div class="steps-container" id="steps-container" style="display: none;">
                <div class="step-item">
                    <input type="checkbox" class="step-checkbox">
                    <div class="step-text">Research best practices for goal achievement</div>
                </div>
                <div class="step-item">
                    <input type="checkbox" class="step-checkbox">
                    <div class="step-text">Create a detailed action plan with milestones</div>
                </div>
                <div class="step-item">
                    <input type="checkbox" class="step-checkbox">
                    <div class="step-text">Set up progress tracking system</div>
                </div>
                <div class="step-item">
                    <input type="checkbox" class="step-checkbox">
                    <div class="step-text">Schedule regular review sessions</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // DOM Elements
        const chatMessages = document.getElementById('chat-messages');
        const userInput = document.getElementById('user-input');
        const sendBtn = document.getElementById('send-btn');
        const goalTrackerBtn = document.getElementById('goal-tracker-btn');
        const goalModal = document.getElementById('goal-modal');
        const closeModal = document.getElementById('close-modal');
        const goalInput = document.getElementById('goal-input');
        const generateStepsBtn = document.getElementById('generate-steps-btn');
        const stepsContainer = document.getElementById('steps-container');
        
        // Mock AI responses
        const aiResponses = [
            "I understand. How can I help you with that?",
            "That's an interesting point. Have you considered alternative approaches?",
            "Based on my analysis, I recommend breaking this down into smaller tasks.",
            "I've added this to your Mind Zones for future reference.",
            "Great insight! How would you like to proceed with this?",
            "I can help you organize this. Which Mind Zone should I categorize it under?",
            "Let me provide some suggestions to help you achieve this goal."
        ];
        
        // Zone icons mapping
        const zoneIcons = {
            ideas: "üí°",
            goals: "üéØ",
            money: "üí∞",
            health: "‚ù§Ô∏è",
            random: "ü§ñ"
        };
        
        // Initialize chat from localStorage
        function initChat() {
            const savedChat = localStorage.getItem('cognos_chat');
            if (savedChat) {
                const messages = JSON.parse(savedChat);
                messages.forEach(msg => {
                    addMessageToChat(msg.text, msg.sender, msg.zone);
                });
            }
        }
        
        // Add message to chat
        function addMessageToChat(text, sender, zone = 'random') {
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('message');
            messageDiv.classList.add(sender === 'user' ? 'user-message' : 'ai-message');
            
            messageDiv.innerHTML = `
                ${text}
                <div class="tag-selector" data-zone="${zone}">
                    ${zoneIcons[zone]} ${zone.charAt(0).toUpperCase() + zone.slice(1)}
                </div>
            `;
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            // Save to localStorage
            saveMessageToStorage(text, sender, zone);
        }
        
        // Save message to localStorage
        function saveMessageToStorage(text, sender, zone) {
            let messages = JSON.parse(localStorage.getItem('cognos_chat')) || [];
            messages.push({ text, sender, zone, timestamp: new Date().toISOString() });
            localStorage.setItem('cognos_chat', JSON.stringify(messages));
        }
        
        // Generate AI response
        function getAIResponse(userMessage) {
            // Simple keyword matching for more contextual responses
            if (userMessage.toLowerCase().includes('goal')) {
                return "I can help you set and track goals. Would you like to use the GoalTracker?";
            } else if (userMessage.toLowerCase().includes('idea')) {
                return "That's an interesting idea! Would you like me to save it to your Ideas zone?";
            } else if (userMessage.toLowerCase().includes('money') || userMessage.toLowerCase().includes('finance')) {
                return "For financial matters, I recommend tracking expenses in the Money zone.";
            } else if (userMessage.toLowerCase().includes('health')) {
                return "Health is important! I can help you track wellness activities in the Health zone.";
            }
            
            // Random response if no keywords matched
            return aiResponses[Math.floor(Math.random() * aiResponses.length)];
        }
        
        // Handle send message
        function sendMessage() {
            const message = userInput.value.trim();
            if (message) {
                addMessageToChat(message, 'user');
                userInput.value = '';
                
                // Simulate AI thinking
                setTimeout(() => {
                    const aiResponse = getAIResponse(message);
                    addMessageToChat(aiResponse, 'ai');
                }, 1000);
            }
        }
        
        // Generate goal steps
        function generateGoalSteps() {
            const goal = goalInput.value.trim();
            if (goal) {
                stepsContainer.style.display = 'block';
                goalModal.querySelector('.modal-title').textContent = `Goal: ${goal}`;
                
                // Simulate goal analysis
                setTimeout(() => {
                    const stepItems = stepsContainer.querySelectorAll('.step-text');
                    stepItems[0].textContent = `Research: ${goal.split(' ')[0]} strategies`;
                    stepItems[1].textContent = `Plan: Create ${goal.split(' ')[0]} roadmap`;
                    stepItems[2].textContent = `Execute: Start first ${goal.split(' ')[0]} action`;
                    stepItems[3].textContent = `Review: Evaluate ${goal.split(' ')[0]} progress`;
                }, 800);
            }
        }
        
        // Event Listeners
        sendBtn.addEventListener('click', sendMessage);
        userInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') sendMessage();
        });
        
        goalTrackerBtn.addEventListener('click', () => {
            goalModal.classList.add('active');
        });
        
        closeModal.addEventListener('click', () => {
            goalModal.classList.remove('active');
        });
        
        generateStepsBtn.addEventListener('click', generateGoalSteps);
        
        // Close modal when clicking outside
        window.addEventListener('click', (e) => {
            if (e.target === goalModal) {
                goalModal.classList.remove('active');
            }
        });
        
        // Initialize chat on load
        window.addEventListener('DOMContentLoaded', initChat);
        
        // PWA Installation
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            // Store the event for later use
            const deferredPrompt = e;
            
            // Show install button (we don't have one, but could add in future)
            console.log('PWA installation available');
            
            // Listen for app install event
            window.addEventListener('appinstalled', () => {
                console.log('CognOS installed successfully');
            });
        });
    </script>
</body>
</html>
