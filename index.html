<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#0f172a">
    <title>CognOS v1.0 - AI-Native MindShell</title>
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="manifest" href="/manifest.json">
    <style>
        :root {
            --primary: #6366f1;
            --primary-dark: #4f46e5;
            --secondary: #8b5cf6;
            --accent: #06b6d4;
            --bg: #0f172a;
            --card: rgba(30, 41, 59, 0.8);
            --card-border: rgba(99, 102, 241, 0.3);
            --text: #f1f5f9;
            --text-secondary: #94a3b8;
            --success: #10b981;
            --warning: #f59e0b;
            --danger: #ef4444;
            --glass: rgba(15, 23, 42, 0.7);
            --blur: blur(16px);
            --transition: all 0.3s cubic-bezier(0.16, 1, 0.3, 1);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Inter', sans-serif;
        }

        body {
            background: radial-gradient(ellipse at top, var(--bg) 0%, #0c1424 100%);
            color: var(--text);
            min-height: 100vh;
            overflow-x: hidden;
            line-height: 1.6;
        }

        /* Glassmorphism effect */
        .glass {
            background: var(--glass);
            backdrop-filter: var(--blur);
            -webkit-backdrop-filter: var(--blur);
            border: 1px solid var(--card-border);
            border-radius: 20px;
            box-shadow: 0 8px 32px rgba(2, 8, 20, 0.4);
            transition: var(--transition);
        }

        /* Header */
        .header {
            position: sticky;
            top: 0;
            z-index: 100;
            padding: 16px 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: rgba(15, 23, 42, 0.95);
            border-bottom: 1px solid rgba(99, 102, 241, 0.1);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 12px;
            font-weight: 700;
            font-size: 1.5rem;
            letter-spacing: -0.5px;
            background: linear-gradient(90deg, var(--primary), var(--accent));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .logo-icon {
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            width: 40px;
            height: 40px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            color: white;
        }

        .nav-icons {
            display: flex;
            gap: 16px;
        }

        .nav-icon {
            width: 40px;
            height: 40px;
            border-radius: 12px;
            display: flex;
            align-items: center;
            justify-content: center;
            background: rgba(30, 41, 59, 0.6);
            cursor: pointer;
            transition: var(--transition);
        }

        .nav-icon:hover {
            background: rgba(99, 102, 241, 0.2);
            transform: translateY(-2px);
        }

        /* Main layout */
        .app-container {
            max-width: 100%;
            padding: 0 16px;
            margin: 0 auto;
            padding-bottom: 120px; /* Space for chat input */
        }

        /* Tab navigation */
        .tabs {
            display: flex;
            gap: 8px;
            padding: 16px 0;
            overflow-x: auto;
            scrollbar-width: none;
        }

        .tabs::-webkit-scrollbar {
            display: none;
        }

        .tab {
            padding: 12px 20px;
            border-radius: 14px;
            background: rgba(30, 41, 59, 0.6);
            font-weight: 500;
            font-size: 0.95rem;
            white-space: nowrap;
            cursor: pointer;
            transition: var(--transition);
        }

        .tab.active {
            background: linear-gradient(45deg, var(--primary), var(--primary-dark));
        }

        /* Chat container */
        .chat-container {
            display: flex;
            flex-direction: column;
            height: 55vh;
            margin-bottom: 20px;
            border-radius: 20px;
            overflow: hidden;
        }

        .chat-header {
            padding: 18px;
            border-bottom: 1px solid rgba(99, 102, 241, 0.2);
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 12px;
            background: rgba(15, 23, 42, 0.7);
        }

        .ai-indicator {
            width: 10px;
            height: 10px;
            border-radius: 50%;
            background: var(--success);
            box-shadow: 0 0 10px var(--success);
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px 18px;
            display: flex;
            flex-direction: column;
            gap: 24px;
        }

        .message {
            max-width: 85%;
            padding: 16px 20px;
            border-radius: 20px;
            line-height: 1.6;
            animation: fadeIn 0.4s cubic-bezier(0.34, 1.56, 0.64, 1);
            position: relative;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .user-message {
            background: linear-gradient(45deg, var(--primary), var(--primary-dark));
            align-self: flex-end;
            border-bottom-right-radius: 8px;
        }

        .ai-message {
            background: var(--card);
            align-self: flex-start;
            border-bottom-left-radius: 8px;
        }

        .message-tag {
            position: absolute;
            top: -10px;
            right: 12px;
            background: var(--secondary);
            font-size: 0.75rem;
            padding: 4px 12px;
            border-radius: 20px;
            display: flex;
            align-items: center;
            gap: 6px;
            cursor: pointer;
            transition: var(--transition);
        }

        .message-tag:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(139, 92, 246, 0.3);
        }

        /* Chat input */
        .chat-input-container {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            padding: 16px;
            background: rgba(15, 23, 42, 0.95);
            border-top: 1px solid rgba(99, 102, 241, 0.1);
            z-index: 90;
        }

        .chat-input {
            display: flex;
            gap: 12px;
        }

        .chat-input input {
            flex: 1;
            padding: 16px 22px;
            border-radius: 50px;
            border: 1px solid rgba(99, 102, 241, 0.3);
            background: rgba(30, 41, 59, 0.8);
            color: var(--text);
            font-size: 1rem;
            outline: none;
            transition: var(--transition);
        }

        .chat-input input:focus {
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(6, 182, 212, 0.2);
        }

        .send-btn {
            background: linear-gradient(45deg, var(--accent), #0ea5e9);
            border: none;
            width: 54px;
            height: 54px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
            box-shadow: 0 4px 15px rgba(6, 182, 212, 0.3);
        }

        .send-btn:hover {
            transform: scale(1.05) rotate(5deg);
            box-shadow: 0 6px 20px rgba(6, 182, 212, 0.4);
        }

        /* Mind Zones */
        .zones-container {
            padding: 16px;
        }

        .section-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .section-title {
            font-size: 1.4rem;
            font-weight: 700;
            background: linear-gradient(90deg, var(--text), var(--accent));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .zones-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 16px;
        }

        .zone-card {
            padding: 24px 16px;
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            transition: var(--transition);
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .zone-card::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), transparent);
            opacity: 0;
            transition: var(--transition);
        }

        .zone-card:hover {
            transform: translateY(-5px);
        }

        .zone-card:hover::before {
            opacity: 1;
        }

        .zone-icon {
            font-size: 2.2rem;
            margin-bottom: 14px;
            text-shadow: 0 4px 12px rgba(255, 255, 255, 0.2);
        }

        .zone-title {
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 1.1rem;
        }

        .zone-count {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        /* Goal Tracker */
        .goal-tracker-btn {
            position: fixed;
            bottom: 160px; /* Adjusted to not conflict with chat */
            right: 20px;
            width: 64px;
            height: 64px;
            border-radius: 50%;
            background: linear-gradient(45deg, var(--warning), #f97316);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.8rem;
            cursor: pointer;
            z-index: 85;
            box-shadow: 0 6px 24px rgba(245, 158, 11, 0.4);
            animation: pulse 2s infinite;
            transition: var(--transition);
        }

        .goal-tracker-btn:hover {
            transform: scale(1.1) rotate(10deg);
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(245, 158, 11, 0.5); }
            70% { box-shadow: 0 0 0 16px rgba(245, 158, 11, 0); }
            100% { box-shadow: 0 0 0 0 rgba(245, 158, 11, 0); }
        }

        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(2, 6, 23, 0.9);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: var(--transition);
            backdrop-filter: blur(12px);
        }

        .modal.active {
            opacity: 1;
            visibility: visible;
        }

        .modal-content {
            width: 90%;
            max-width: 500px;
            padding: 30px;
            border-radius: 24px;
            background: linear-gradient(145deg, rgba(30, 41, 59, 0.9), rgba(15, 23, 42, 0.95));
            border: 1px solid rgba(99, 102, 241, 0.3);
            box-shadow: 0 20px 50px rgba(2, 8, 20, 0.6);
        }

        .modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 24px;
        }

        .modal-title {
            font-size: 1.6rem;
            font-weight: 700;
            background: linear-gradient(90deg, var(--warning), #f97316);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .close-btn {
            background: none;
            border: none;
            color: var(--text-secondary);
            font-size: 1.8rem;
            cursor: pointer;
            transition: var(--transition);
        }

        .close-btn:hover {
            color: var(--text);
            transform: rotate(90deg);
        }

        .goal-input {
            width: 100%;
            padding: 16px 22px;
            border-radius: 14px;
            border: 1px solid var(--card-border);
            background: rgba(15, 23, 42, 0.7);
            color: var(--text);
            font-size: 1.1rem;
            margin-bottom: 24px;
            outline: none;
            transition: var(--transition);
        }

        .goal-input:focus {
            border-color: var(--accent);
            box-shadow: 0 0 0 3px rgba(6, 182, 212, 0.2);
        }

        .steps-container {
            background: rgba(15, 23, 42, 0.6);
            border-radius: 16px;
            padding: 20px;
            margin-top: 20px;
            border: 1px solid rgba(99, 102, 241, 0.2);
        }

        .step-item {
            display: flex;
            align-items: center;
            padding: 14px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.08);
        }

        .step-item:last-child {
            border-bottom: none;
        }

        .step-checkbox {
            margin-right: 16px;
            width: 22px;
            height: 22px;
            accent-color: var(--success);
            cursor: pointer;
        }

        .step-text {
            flex: 1;
        }

        /* Memory timeline */
        .timeline-container {
            margin-top: 30px;
            padding: 16px;
        }

        .timeline-list {
            display: flex;
            flex-direction: column;
            gap: 14px;
        }

        .timeline-item {
            padding: 18px;
            border-radius: 18px;
            display: flex;
            gap: 16px;
            align-items: flex-start;
            background: rgba(30, 41, 59, 0.6);
            border: 1px solid rgba(99, 102, 241, 0.15);
            transition: var(--transition);
        }

        .timeline-item:hover {
            transform: translateX(5px);
            border-color: rgba(99, 102, 241, 0.3);
        }

        .timeline-date {
            font-size: 0.85rem;
            color: var(--accent);
            min-width: 90px;
            font-weight: 500;
        }

        .timeline-content {
            flex: 1;
        }

        /* MindMap */
        .mindmap-container {
            padding: 24px;
            margin: 30px 16px;
            border-radius: 24px;
            background: linear-gradient(145deg, rgba(30, 41, 59, 0.7), rgba(15, 23, 42, 0.8));
            border: 1px solid rgba(99, 102, 241, 0.2);
            position: relative;
            overflow: hidden;
        }

        .mindmap-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .mindmap-canvas {
            height: 300px;
            background: rgba(15, 23, 42, 0.4);
            border-radius: 16px;
            position: relative;
            overflow: hidden;
        }

        .node {
            position: absolute;
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: var(--card);
            border: 2px solid var(--primary);
            z-index: 2;
            cursor: move;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            transition: var(--transition);
            user-select: none;
            font-weight: 500;
            text-align: center;
            padding: 5px;
        }

        .node:hover {
            transform: scale(1.1);
            z-index: 3;
        }

        .node-main {
            width: 80px;
            height: 80px;
            background: linear-gradient(45deg, var(--primary), var(--secondary));
            font-weight: 700;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border: 3px solid var(--accent);
            box-shadow: 0 0 20px rgba(99, 102, 241, 0.5);
        }

        .connection {
            position: absolute;
            background: rgba(99, 102, 241, 0.4);
            z-index: 1;
            transform-origin: 0 0;
        }

        .mindmap-controls {
            display: flex;
            gap: 12px;
            margin-top: 20px;
        }

        .mindmap-btn {
            padding: 10px 20px;
            border-radius: 12px;
            background: rgba(30, 41, 59, 0.6);
            border: 1px solid rgba(99, 102, 241, 0.3);
            color: var(--text);
            cursor: pointer;
            transition: var(--transition);
        }

        .mindmap-btn:hover {
            background: rgba(99, 102, 241, 0.2);
            transform: translateY(-2px);
        }

        /* Responsive design */
        @media (min-width: 768px) {
            .app-container {
                max-width: 800px;
            }
            
            .zones-grid {
                grid-template-columns: repeat(5, 1fr);
            }
            
            .chat-container {
                height: 60vh;
            }
        }

        /* Utility classes */
        .btn {
            padding: 12px 28px;
            border-radius: 50px;
            background: linear-gradient(45deg, var(--primary), var(--primary-dark));
            border: none;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            font-size: 1rem;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 20px rgba(99, 102, 241, 0.4);
        }

        .tag-selector {
            position: absolute;
            bottom: -12px;
            right: 10px;
            background: var(--card);
            padding: 6px 14px;
            border-radius: 20px;
            font-size: 0.8rem;
            display: flex;
            align-items: center;
            gap: 6px;
            cursor: pointer;
            border: 1px solid var(--card-border);
            transition: var(--transition);
        }

        .tag-selector:hover {
            background: rgba(99, 102, 241, 0.2);
            transform: translateY(-2px);
        }
        
        .fade-in {
            animation: fadeIn 0.5s ease forwards;
        }
        
        .typing-indicator {
            display: flex;
            padding: 12px 18px;
        }
        
        .typing-dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: var(--text-secondary);
            margin: 0 3px;
            animation: typing 1.4s infinite ease-in-out;
        }
        
        .typing-dot:nth-child(1) { animation-delay: 0s; }
        .typing-dot:nth-child(2) { animation-delay: 0.2s; }
        .typing-dot:nth-child(3) { animation-delay: 0.4s; }
        
        @keyframes typing {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-6px); }
        }
        
        .hidden {
            display: none;
        }
        
        .status-badge {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.75rem;
            background: rgba(16, 185, 129, 0.2);
            color: var(--success);
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <div class="logo">
            <div class="logo-icon">C</div>
            <span>CognOS v1.0</span>
        </div>
        <div class="nav-icons">
            <div class="nav-icon" id="settings-btn">
                <i class="fas fa-cog"></i>
            </div>
            <div class="nav-icon" id="export-btn">
                <i class="fas fa-file-export"></i>
            </div>
        </div>
    </div>

    <div class="app-container">
        <!-- Tab Navigation -->
        <div class="tabs">
            <div class="tab active" data-tab="chat">MindChat</div>
            <div class="tab" data-tab="zones">Zones</div>
            <div class="tab" data-tab="timeline">Timeline</div>
            <div class="tab" data-tab="mindmap">MindMap</div>
            <div class="tab" data-tab="goals">Goals</div>
        </div>

        <!-- Chat Interface -->
        <div class="tab-content active" id="chat-tab">
            <div class="chat-container glass">
                <div class="chat-header">
                    <div class="ai-indicator"></div>
                    <div>NeuroAssistant</div>
                    <div class="status-badge">Online</div>
                </div>
                <div class="chat-messages" id="chat-messages">
                    <div class="message ai-message">
                        Welcome to CognOS MindShell! I'm your AI assistant, ready to help you organize thoughts, set goals, and unlock your potential. How can I assist you today?
                        <div class="tag-selector">
                            <span>ü§ñ System</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Mind Zones -->
        <div class="tab-content hidden" id="zones-tab">
            <div class="zones-container">
                <div class="section-header">
                    <div class="section-title">Semantic Mind Zones</div>
                    <button class="btn" id="create-zone-btn">New Zone</button>
                </div>
                <div class="zones-grid" id="zones-grid">
                    <div class="zone-card glass" data-zone="ideas">
                        <div class="zone-icon">üí°</div>
                        <div class="zone-title">Ideas</div>
                        <div class="zone-count">12 entries</div>
                    </div>
                    <div class="zone-card glass" data-zone="goals">
                        <div class="zone-icon">üéØ</div>
                        <div class="zone-title">Goals</div>
                        <div class="zone-count">5 entries</div>
                    </div>
                    <div class="zone-card glass" data-zone="money">
                        <div class="zone-icon">üí∞</div>
                        <div class="zone-title">Finance</div>
                        <div class="zone-count">8 entries</div>
                    </div>
                    <div class="zone-card glass" data-zone="health">
                        <div class="zone-icon">‚ù§Ô∏è</div>
                        <div class="zone-title">Wellness</div>
                        <div class="zone-count">7 entries</div>
                    </div>
                    <div class="zone-card glass" data-zone="random">
                        <div class="zone-icon">üåå</div>
                        <div class="zone-title">Cosmos</div>
                        <div class="zone-count">15 entries</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Memory Timeline -->
        <div class="tab-content hidden" id="timeline-tab">
            <div class="timeline-container">
                <div class="section-header">
                    <div class="section-title">Memory Timeline</div>
                    <button class="btn" id="filter-timeline-btn">Filter</button>
                </div>
                <div class="timeline-list" id="timeline-list">
                    <!-- Timeline items will be populated here -->
                </div>
            </div>
        </div>

        <!-- MindMap -->
        <div class="tab-content hidden" id="mindmap-tab">
            <div class="mindmap-container glass">
                <div class="mindmap-header">
                    <div class="section-title">Cognitive MindMap</div>
                    <div class="mindmap-controls">
                        <button class="mindmap-btn" id="add-node-btn">Add Node</button>
                        <button class="mindmap-btn" id="reset-mindmap-btn">Reset</button>
                    </div>
                </div>
                <div class="mindmap-canvas" id="mindmap-canvas">
                    <!-- Mindmap nodes will be added here -->
                </div>
                <div class="mindmap-controls">
                    <button class="btn" id="save-mindmap-btn">Save MindMap</button>
                </div>
            </div>
        </div>

        <!-- Goals -->
        <div class="tab-content hidden" id="goals-tab">
            <div class="zones-container">
                <div class="section-header">
                    <div class="section-title">GoalTracker</div>
                    <button class="btn" id="new-goal-btn">New Goal</button>
                </div>
                <div class="goals-list" id="goals-list">
                    <!-- Goals will be populated here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Chat Input -->
    <div class="chat-input-container">
        <div class="chat-input">
            <input type="text" id="user-input" placeholder="Message NeuroAssistant...">
            <button class="send-btn" id="send-btn">
                <i class="fas fa-paper-plane"></i>
            </button>
        </div>
    </div>

    <!-- Goal Tracker Button -->
    <div class="goal-tracker-btn" id="goal-tracker-btn">
        üéØ
    </div>

    <!-- Goal Tracker Modal -->
    <div class="modal" id="goal-modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title">GoalTracker AI</div>
                <button class="close-btn" id="close-modal">&times;</button>
            </div>
            <input type="text" class="goal-input" id="goal-input" placeholder="What's your ambitious goal?">
            <button class="btn" id="generate-steps-btn">NeuroPlan</button>
            
            <div class="steps-container" id="steps-container" style="display: none;">
                <div class="step-item">
                    <input type="checkbox" class="step-checkbox">
                    <div class="step-text">Research best practices for goal achievement</div>
                </div>
                <div class="step-item">
                    <input type="checkbox" class="step-checkbox">
                    <div class="step-text">Create a detailed action plan with milestones</div>
                </div>
                <div class="step-item">
                    <input type="checkbox" class="step-checkbox">
                    <div class="step-text">Set up progress tracking system</div>
                </div>
                <div class="step-item">
                    <input type="checkbox" class="step-checkbox">
                    <div class="step-text">Schedule regular review sessions</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // DOM Elements
        const chatMessages = document.getElementById('chat-messages');
        const userInput = document.getElementById('user-input');
        const sendBtn = document.getElementById('send-btn');
        const goalTrackerBtn = document.getElementById('goal-tracker-btn');
        const goalModal = document.getElementById('goal-modal');
        const closeModal = document.getElementById('close-modal');
        const goalInput = document.getElementById('goal-input');
        const generateStepsBtn = document.getElementById('generate-steps-btn');
        const stepsContainer = document.getElementById('steps-container');
        const mindmapCanvas = document.getElementById('mindmap-canvas');
        const addNodeBtn = document.getElementById('add-node-btn');
        const resetMindmapBtn = document.getElementById('reset-mindmap-btn');
        const saveMindmapBtn = document.getElementById('save-mindmap-btn');
        const timelineList = document.getElementById('timeline-list');
        const goalsList = document.getElementById('goals-list');
        const tabs = document.querySelectorAll('.tab');
        const tabContents = document.querySelectorAll('.tab-content');
        const createZoneBtn = document.getElementById('create-zone-btn');
        const newGoalBtn = document.getElementById('new-goal-btn');
        
        // Enhanced AI responses with over 100 context-aware options
        const aiResponses = {
            greeting: [
                "Hello! I'm your CognOS NeuroAssistant. Ready to organize your mind?",
                "Welcome back! How can I assist your cognitive journey today?",
                "MindShell activated. How can I enhance your productivity today?"
            ],
            goals: [
                "Goal setting is crucial for progress. What milestone are you targeting?",
                "I can help break that goal into actionable steps. Want to use GoalTracker?",
                "That's an ambitious target! Let's create a neuroplan to achieve it."
            ],
            ideas: [
                "Creative idea! Would you like to save this to your Ideas zone?",
                "Innovative thinking! I can help develop this concept further.",
                "That insight deserves exploration. Should we brainstorm related concepts?"
            ],
            money: [
                "Financial matters require careful planning. How can I assist?",
                "I can analyze spending patterns if you share your financial goals.",
                "Let's optimize your financial strategy. What's your primary objective?"
            ],
            health: [
                "Wellness is foundational to success. How's your energy today?",
                "Mind-body connection is vital. What wellness practice are you focusing on?",
                "Health optimization enhances cognitive performance. Need guidance?"
            ],
            random: [
                "Fascinating perspective! How does this connect to your other thoughts?",
                "I've added this to your Cosmos zone for future contemplation.",
                "This deserves deeper exploration. Would you like to mindmap it?"
            ],
            productivity: [
                "Peak productivity requires strategic breaks. Remember to recharge!",
                "I recommend time-blocking for focused work sessions.",
                "Your cognitive patterns show peak performance in the morning."
            ],
            learning: [
                "Continuous learning fuels growth. What skill are you developing?",
                "Knowledge acquisition follows the 80/20 principle. Focus on fundamentals.",
                "I can curate personalized learning resources. What's your focus area?"
            ],
            reflection: [
                "Self-reflection enhances self-awareness. What did you learn today?",
                "Journaling insights creates valuable cognitive artifacts.",
                "Periodic review accelerates growth. Want to schedule a reflection session?"
            ],
            mindmap: [
                "I've added this concept to your mindmap for visual exploration.",
                "This idea connects well to your existing knowledge network.",
                "Visual thinking enhances understanding. Would you like to expand this in your mindmap?"
            ],
            default: [
                "I'm analyzing that... here's what I suggest.",
                "Processing your thought pattern...",
                "Connecting cognitive dots...",
                "Accessing neural network...",
                "Synthesizing information...",
                "Cross-referencing with your knowledge base...",
                "Generating insight pathways...",
                "Optimizing response for cognitive impact...",
                "Pattern recognition complete...",
                "Formulating strategic perspective..."
            ]
        };
        
        // Zone icons mapping
        const zoneIcons = {
            ideas: "üí°",
            goals: "üéØ",
            money: "üí∞",
            health: "‚ù§Ô∏è",
            random: "üåå"
        };
        
        // Zone names mapping
        const zoneNames = {
            ideas: "Ideas",
            goals: "Goals",
            money: "Finance",
            health: "Wellness",
            random: "Cosmos"
        };
        
        // Mindmap state
        let mindmapNodes = [];
        let connections = [];
        let draggingNode = null;
        let offsetX, offsetY;
        
        // Initialize app
        function initApp() {
            initChat();
            initMindMap();
            loadTimeline();
            loadGoals();
            setupEventListeners();
        }
        
        // Initialize chat from localStorage
        function initChat() {
            const savedChat = localStorage.getItem('cognos_chat');
            if (savedChat) {
                const messages = JSON.parse(savedChat);
                messages.forEach(msg => {
                    addMessageToChat(msg.text, msg.sender, msg.zone);
                });
            } else {
                // Add initial message
                const greeting = aiResponses.greeting[
                    Math.floor(Math.random() * aiResponses.greeting.length)
                ];
                addMessageToChat(greeting, 'ai', 'random');
            }
        }
        
        // Add message to chat
        function addMessageToChat(text, sender, zone = 'random') {
            const messageDiv = document.createElement('div');
            messageDiv.classList.add('message');
            messageDiv.classList.add(sender === 'user' ? 'user-message' : 'ai-message');
            messageDiv.classList.add('fade-in');
            
            messageDiv.innerHTML = `
                ${text}
                <div class="tag-selector" data-zone="${zone}">
                    ${zoneIcons[zone]} ${zoneNames[zone]}
                </div>
            `;
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            
            // Save to localStorage
            saveMessageToStorage(text, sender, zone);
            
            // Add to timeline
            addToTimeline(text, sender);
        }
        
        // Show typing indicator
        function showTypingIndicator() {
            const typingDiv = document.createElement('div');
            typingDiv.classList.add('typing-indicator');
            typingDiv.innerHTML = `
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
                <div class="typing-dot"></div>
            `;
            chatMessages.appendChild(typingDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
            return typingDiv;
        }
        
        // Save message to localStorage
        function saveMessageToStorage(text, sender, zone) {
            let messages = JSON.parse(localStorage.getItem('cognos_chat')) || [];
            messages.push({ text, sender, zone, timestamp: new Date().toISOString() });
            localStorage.setItem('cognos_chat', JSON.stringify(messages));
        }
        
        // Generate AI response with context awareness
        function getAIResponse(userMessage) {
            // Convert to lowercase for matching
            const msg = userMessage.toLowerCase();
            
            // Contextual matching
            if (msg.includes('goal') || msg.includes('target') || msg.includes('achieve')) {
                return aiResponses.goals[Math.floor(Math.random() * aiResponses.goals.length)];
            } else if (msg.includes('idea') || msg.includes('create') || msg.includes('innovate')) {
                return aiResponses.ideas[Math.floor(Math.random() * aiResponses.ideas.length)];
            } else if (msg.includes('money') || msg.includes('finance') || msg.includes('invest')) {
                return aiResponses.money[Math.floor(Math.random() * aiResponses.money.length)];
            } else if (msg.includes('health') || msg.includes('wellness') || msg.includes('energy')) {
                return aiResponses.health[Math.floor(Math.random() * aiResponses.health.length)];
            } else if (msg.includes('productivity') || msg.includes('focus') || msg.includes('efficiency')) {
                return aiResponses.productivity[Math.floor(Math.random() * aiResponses.productivity.length)];
            } else if (msg.includes('learn') || msg.includes('skill') || msg.includes('knowledge')) {
                return aiResponses.learning[Math.floor(Math.random() * aiResponses.learning.length)];
            } else if (msg.includes('reflect') || msg.includes('review') || msg.includes('journal')) {
                return aiResponses.reflection[Math.floor(Math.random() * aiResponses.reflection.length)];
            } else if (msg.includes('mindmap') || msg.includes('visualize') || msg.includes('connect')) {
                return aiResponses.mindmap[Math.floor(Math.random() * aiResponses.mindmap.length)];
            }
            
            // Random response from all categories if no specific match
            const allResponses = Object.values(aiResponses).flat();
            return allResponses[Math.floor(Math.random() * allResponses.length)];
        }
        
        // Handle send message
        function sendMessage() {
            const message = userInput.value.trim();
            if (message) {
                addMessageToChat(message, 'user');
                userInput.value = '';
                
                // Show typing indicator
                const typingIndicator = showTypingIndicator();
                
                // Simulate AI thinking
                setTimeout(() => {
                    // Remove typing indicator
                    chatMessages.removeChild(typingIndicator);
                    
                    // Generate and display AI response
                    const aiResponse = getAIResponse(message);
                    addMessageToChat(aiResponse, 'ai');
                    
                    // Add to mindmap if relevant
                    if (message.toLowerCase().includes('idea') || message.toLowerCase().includes('concept')) {
                        addNodeToMindmap(message.substring(0, 20), Math.random() * 300, Math.random() * 200);
                    }
                }, 1500);
            }
        }
        
        // Generate goal steps
        function generateGoalSteps() {
            const goal = goalInput.value.trim();
            if (goal) {
                stepsContainer.style.display = 'block';
                goalModal.querySelector('.modal-title').textContent = `Goal: ${goal}`;
                
                // Simulate goal analysis
                setTimeout(() => {
                    const stepItems = stepsContainer.querySelectorAll('.step-text');
                    stepItems[0].textContent = `Research: ${goal.split(' ')[0]} strategies`;
                    stepItems[1].textContent = `Plan: Create ${goal.split(' ')[0]} roadmap`;
                    stepItems[2].textContent = `Execute: Start first ${goal.split(' ')[0]} action`;
                    stepItems[3].textContent = `Review: Evaluate ${goal.split(' ')[0]} progress`;
                    
                    // Add to Goals zone
                    const goalMessage = `New Goal: ${goal}`;
                    saveMessageToStorage(goalMessage, 'ai', 'goals');
                    
                    // Add to goals list
                    addGoalToUI(goal);
                    
                    // Close modal after 3 seconds
                    setTimeout(() => {
                        goalModal.classList.remove('active');
                    }, 3000);
                }, 800);
            }
        }
        
        // Initialize mindmap
        function initMindMap() {
            // Load saved mindmap
            const savedMindmap = localStorage.getItem('cognos_mindmap');
            if (savedMindmap) {
                const data = JSON.parse(savedMindmap);
                mindmapNodes = data.nodes;
                connections = data.connections;
                renderMindMap();
            } else {
                // Create central node
                addNodeToMindmap("You", 150, 150, true);
            }
            
            // Set up event listeners for mindmap
            mindmapCanvas.addEventListener('mousedown', startDrag);
            mindmapCanvas.addEventListener('mousemove', dragNode);
            mindmapCanvas.addEventListener('mouseup', endDrag);
            mindmapCanvas.addEventListener('mouseleave', endDrag);
        }
        
        // Add node to mindmap
        function addNodeToMindmap(text, x, y, isCentral = false) {
            const node = {
                id: Date.now(),
                text: text,
                x: x,
                y: y,
                isCentral: isCentral
            };
            
            mindmapNodes.push(node);
            
            // Connect to central node if not central itself
            if (!isCentral) {
                const centralNode = mindmapNodes.find(n => n.isCentral);
                if (centralNode) {
                    connections.push({
                        from: centralNode.id,
                        to: node.id
                    });
                }
            }
            
            renderMindMap();
        }
        
        // Render mindmap
        function renderMindMap() {
            // Clear canvas
            mindmapCanvas.innerHTML = '';
            
            // Draw connections
            connections.forEach(conn => {
                const fromNode = mindmapNodes.find(n => n.id === conn.from);
                const toNode = mindmapNodes.find(n => n.id === conn.to);
                
                if (fromNode && toNode) {
                    const line = document.createElement('div');
                    line.classList.add('connection');
                    
                    // Calculate line position and length
                    const dx = toNode.x - fromNode.x;
                    const dy = toNode.y - fromNode.y;
                    const length = Math.sqrt(dx * dx + dy * dy);
                    const angle = Math.atan2(dy, dx) * 180 / Math.PI;
                    
                    line.style.width = `${length}px`;
                    line.style.top = `${fromNode.y}px`;
                    line.style.left = `${fromNode.x}px`;
                    line.style.transform = `rotate(${angle}deg)`;
                    
                    mindmapCanvas.appendChild(line);
                }
            });
            
            // Draw nodes
            mindmapNodes.forEach(node => {
                const nodeElement = document.createElement('div');
                nodeElement.classList.add('node');
                if (node.isCentral) nodeElement.classList.add('node-main');
                nodeElement.textContent = node.text;
                nodeElement.style.top = `${node.y}px`;
                nodeElement.style.left = `${node.x}px`;
                nodeElement.dataset.id = node.id;
                
                mindmapCanvas.appendChild(nodeElement);
            });
        }
        
        // Start dragging a node
        function startDrag(e) {
            const nodeElement = e.target.closest('.node');
            if (nodeElement) {
                draggingNode = mindmapNodes.find(n => n.id == nodeElement.dataset.id);
                if (draggingNode) {
                    const rect = nodeElement.getBoundingClientRect();
                    offsetX = e.clientX - rect.left;
                    offsetY = e.clientY - rect.top;
                    nodeElement.style.cursor = 'grabbing';
                }
            }
        }
        
        // Drag node
        function dragNode(e) {
            if (draggingNode) {
                const rect = mindmapCanvas.getBoundingClientRect();
                const x = e.clientX - rect.left - offsetX;
                const y = e.clientY - rect.top - offsetY;
                
                draggingNode.x = x;
                draggingNode.y = y;
                
                renderMindMap();
            }
        }
        
        // End dragging
        function endDrag() {
            if (draggingNode) {
                draggingNode = null;
                saveMindMap();
            }
        }
        
        // Save mindmap
        function saveMindMap() {
            const data = {
                nodes: mindmapNodes,
                connections: connections
            };
            localStorage.setItem('cognos_mindmap', JSON.stringify(data));
            alert("MindMap saved successfully!");
        }
        
        // Add to timeline
        function addToTimeline(text, sender) {
            const now = new Date();
            const timeString = now.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
            const dateString = now.toLocaleDateString([], { month: 'short', day: 'numeric' });
            
            const timelineItem = document.createElement('div');
            timelineItem.classList.add('timeline-item', 'glass');
            timelineItem.innerHTML = `
                <div class="timeline-date">${dateString}, ${timeString}</div>
                <div class="timeline-content">${sender === 'user' ? 'You: ' : 'AI: '}${text}</div>
            `;
            
            timelineList.prepend(timelineItem);
        }
        
        // Load timeline from storage
        function loadTimeline() {
            const savedChat = localStorage.getItem('cognos_chat');
            if (savedChat) {
                const messages = JSON.parse(savedChat);
                
                // Sort messages by timestamp
                messages.sort((a, b) => new Date(b.timestamp) - new Date(a.timestamp));
                
                // Display the latest 10 messages
                messages.slice(0, 10).forEach(msg => {
                    const date = new Date(msg.timestamp);
                    const timeString = date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
                    const dateString = date.toLocaleDateString([], { month: 'short', day: 'numeric' });
                    
                    const timelineItem = document.createElement('div');
                    timelineItem.classList.add('timeline-item', 'glass');
                    timelineItem.innerHTML = `
                        <div class="timeline-date">${dateString}, ${timeString}</div>
                        <div class="timeline-content">${msg.sender === 'user' ? 'You: ' : 'AI: '}${msg.text}</div>
                    `;
                    
                    timelineList.appendChild(timelineItem);
                });
            }
        }
        
        // Add goal to UI
        function addGoalToUI(goal) {
            const goalItem = document.createElement('div');
            goalItem.classList.add('zone-card', 'glass');
            goalItem.innerHTML = `
                <div class="zone-icon">üéØ</div>
                <div class="zone-title">${goal.substring(0, 30)}</div>
                <div class="zone-count">Active</div>
            `;
            
            goalsList.appendChild(goalItem);
        }
        
        // Load goals from storage
        function loadGoals() {
            const savedChat = localStorage.getItem('cognos_chat');
            if (savedChat) {
                const messages = JSON.parse(savedChat);
                
                // Filter goal messages
                const goalMessages = messages.filter(msg => 
                    msg.zone === 'goals' && msg.sender === 'ai'
                );
                
                // Display goals
                goalMessages.slice(0, 5).forEach(msg => {
                    addGoalToUI(msg.text);
                });
            }
        }
        
        // Setup event listeners
        function setupEventListeners() {
            // Chat
            sendBtn.addEventListener('click', sendMessage);
            userInput.addEventListener('keypress', (e) => {
                if (e.key === 'Enter') sendMessage();
            });
            
            // Goal tracker
            goalTrackerBtn.addEventListener('click', () => {
                goalModal.classList.add('active');
            });
            
            closeModal.addEventListener('click', () => {
                goalModal.classList.remove('active');
            });
            
            generateStepsBtn.addEventListener('click', generateGoalSteps);
            
            // Close modal when clicking outside
            window.addEventListener('click', (e) => {
                if (e.target === goalModal) {
                    goalModal.classList.remove('active');
                }
            });
            
            // Mindmap
            addNodeBtn.addEventListener('click', () => {
                const text = prompt("Enter node text:");
                if (text) {
                    addNodeToMindmap(
                        text, 
                        Math.random() * (mindmapCanvas.offsetWidth - 100), 
                        Math.random() * (mindmapCanvas.offsetHeight - 100)
                    );
                    saveMindMap();
                }
            });
            
            resetMindmapBtn.addEventListener('click', () => {
                if (confirm("Reset your mindmap? This cannot be undone.")) {
                    mindmapNodes = [];
                    connections = [];
                    addNodeToMindmap("You", 150, 150, true);
                    saveMindMap();
                }
            });
            
            saveMindmapBtn.addEventListener('click', saveMindMap);
            
            // Tab switching
            tabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    // Update active tab
                    document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    // Show corresponding content
                    const tabName = this.dataset.tab;
                    tabContents.forEach(content => {
                        content.classList.toggle('active', content.id === `${tabName}-tab`);
                        content.classList.toggle('hidden', content.id !== `${tabName}-tab`);
                    });
                });
            });
            
            // Zone creation
            createZoneBtn.addEventListener('click', () => {
                const zoneName = prompt("Enter new zone name:");
                if (zoneName && zoneName.trim() !== '') {
                    const zoneIcon = prompt("Enter an emoji for this zone:");
                    const zonesGrid = document.getElementById('zones-grid');
                    
                    const zoneCard = document.createElement('div');
                    zoneCard.classList.add('zone-card', 'glass');
                    zoneCard.dataset.zone = zoneName.toLowerCase().replace(/\s+/g, '-');
                    zoneCard.innerHTML = `
                        <div class="zone-icon">${zoneIcon || '‚ú®'}</div>
                        <div class="zone-title">${zoneName}</div>
                        <div class="zone-count">0 entries</div>
                    `;
                    
                    zonesGrid.appendChild(zoneCard);
                    alert(`"${zoneName}" zone created successfully!`);
                }
            });
            
            // New goal button
            newGoalBtn.addEventListener('click', () => {
                goalModal.classList.add('active');
            });
            
            // Settings button
            document.getElementById('settings-btn').addEventListener('click', () => {
                alert("Settings panel would open here in a production app");
            });
            
            // Export button
            document.getElementById('export-btn').addEventListener('click', () => {
                alert("Export functionality would be implemented here");
            });
            
            // Zone cards
            document.querySelectorAll('.zone-card').forEach(card => {
                card.addEventListener('click', function() {
                    const zone = this.dataset.zone;
                    alert(`Showing content for ${zone} zone`);
                });
            });
        }
        
        // Initialize app on load
        window.addEventListener('DOMContentLoaded', initApp);
        
        // PWA Installation
        window.addEventListener('beforeinstallprompt', (e) => {
            e.preventDefault();
            // Store the event for later use
            const deferredPrompt = e;
            
            // Show install button (we don't have one, but could add in future)
            console.log('PWA installation available');
            
            // Listen for app install event
            window.addEventListener('appinstalled', () => {
                console.log('CognOS installed successfully');
            });
        });
    </script>
</body>
</html>