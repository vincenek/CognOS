<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PulsePad - Your Personal Rhythm Companion</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', -apple-system, BlinkMacSystemFont, sans-serif;
        }

        :root {
            --primary-bg: #0f0e17;
            --card-bg: rgba(255, 255, 255, 0.05);
            --text-color: #fffffe;
            --accent-1: #ff8906;
            --accent-2: #f25f4c;
            --accent-3: #e53170;
            --accent-4: #2cb67d;
            --transition: all 0.5s cubic-bezier(0.22, 0.61, 0.36, 1);
        }

        body {
            background: var(--primary-bg);
            color: var(--text-color);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
            overflow-x: hidden;
            position: relative;
        }

        .background-pattern {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: 
                radial-gradient(circle at 10% 20%, rgba(255, 137, 6, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 90% 80%, rgba(242, 95, 76, 0.1) 0%, transparent 20%),
                radial-gradient(circle at 50% 30%, rgba(44, 182, 125, 0.1) 0%, transparent 25%);
            z-index: -1;
            opacity: 0.7;
        }

        .pulse-effect {
            position: absolute;
            width: 100%;
            height: 100%;
            top: 0;
            left: 0;
            overflow: hidden;
            z-index: -2;
        }

        .pulse-circle {
            position: absolute;
            border-radius: 50%;
            opacity: 0;
            animation: pulse 8s infinite cubic-bezier(0.36, 0, 0.66, -0.56);
        }

        @keyframes pulse {
            0% { transform: scale(0); opacity: 0.7; }
            100% { transform: scale(1.5); opacity: 0; }
        }

        .container {
            width: 100%;
            max-width: 500px;
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 25px;
            z-index: 10;
        }

        .header {
            text-align: center;
            margin-bottom: 10px;
        }

        .logo {
            display: flex;
            justify-content: center;
            margin-bottom: 15px;
        }

        .logo-circle {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: var(--accent-1);
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            overflow: hidden;
            box-shadow: 0 0 30px rgba(255, 137, 6, 0.4);
        }

        .logo-circle::before {
            content: '';
            position: absolute;
            width: 100%;
            height: 100%;
            background: conic-gradient(transparent, var(--accent-4), transparent);
            animation: rotate 3s linear infinite;
        }

        .logo-circle i {
            font-size: 2.5rem;
            position: relative;
            z-index: 2;
            color: #0f0e17;
        }

        @keyframes rotate {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        .header h1 {
            font-size: 2.8rem;
            font-weight: 700;
            background: linear-gradient(90deg, var(--accent-1), var(--accent-2), var(--accent-3));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            letter-spacing: -1px;
            margin-bottom: 5px;
        }

        .header p {
            font-size: 1.1rem;
            opacity: 0.85;
            max-width: 400px;
            line-height: 1.6;
            font-weight: 300;
        }

        .timer-card {
            width: 100%;
            background: var(--card-bg);
            backdrop-filter: blur(12px);
            border-radius: 24px;
            padding: 30px;
            display: flex;
            flex-direction: column;
            align-items: center;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.08);
            position: relative;
            overflow: hidden;
            transition: var(--transition);
        }

        .timer-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, var(--accent-1), var(--accent-3));
            transform: scaleX(0);
            transform-origin: left;
            transition: transform 1s ease;
        }

        .timer-card.active::before {
            transform: scaleX(1);
        }

        .phase-display {
            font-size: 2.2rem;
            font-weight: 600;
            margin-bottom: 15px;
            text-transform: uppercase;
            letter-spacing: 2px;
            transition: var(--transition);
            text-align: center;
        }

        .phase-description {
            font-size: 1rem;
            opacity: 0.8;
            margin-bottom: 25px;
            text-align: center;
            max-width: 300px;
            font-weight: 300;
            line-height: 1.6;
        }

        .timer-display {
            font-size: 4.5rem;
            font-weight: 200;
            font-variant-numeric: tabular-nums;
            margin-bottom: 25px;
            transition: var(--transition);
            text-shadow: 0 0 15px rgba(255, 255, 255, 0.2);
            font-family: 'Courier New', monospace;
            letter-spacing: -3px;
        }

        .progress-container {
            width: 100%;
            height: 8px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 30px;
        }

        .progress-bar {
            height: 100%;
            transition: width 1s linear;
            border-radius: 4px;
        }

        .controls {
            display: flex;
            gap: 15px;
            width: 100%;
            justify-content: center;
            flex-wrap: wrap;
        }

        .btn {
            padding: 14px 28px;
            border: none;
            border-radius: 50px;
            background: rgba(255, 255, 255, 0.1);
            color: var(--text-color);
            font-size: 1rem;
            font-weight: 500;
            cursor: pointer;
            transition: var(--transition);
            backdrop-filter: blur(5px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            gap: 10px;
            min-width: 140px;
            justify-content: center;
        }

        .btn:hover {
            background: rgba(255, 255, 255, 0.15);
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
        }

        .btn:active {
            transform: translateY(1px);
        }

        .btn-primary {
            background: linear-gradient(45deg, var(--accent-1), var(--accent-2));
            color: #0f0e17;
            font-weight: 600;
            box-shadow: 0 5px 20px rgba(255, 137, 6, 0.3);
        }

        .btn-primary:hover {
            box-shadow: 0 7px 25px rgba(255, 137, 6, 0.4);
        }

        .features {
            display: flex;
            gap: 20px;
            margin-top: 20px;
        }

        .feature-btn {
            padding: 12px 20px;
            border-radius: 50px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.08);
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            transition: var(--transition);
        }

        .feature-btn:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .rhythm-insights {
            width: 100%;
            background: var(--card-bg);
            backdrop-filter: blur(12px);
            border-radius: 24px;
            padding: 25px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.08);
        }

        .insights-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }

        .insights-header h2 {
            font-size: 1.4rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .insight-content {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .insight-item {
            display: flex;
            gap: 15px;
            align-items: center;
            padding: 15px;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 16px;
            transition: var(--transition);
        }

        .insight-item:hover {
            background: rgba(255, 255, 255, 0.07);
        }

        .insight-icon {
            width: 40px;
            height: 40px;
            border-radius: 12px;
            background: linear-gradient(45deg, var(--accent-1), var(--accent-3));
            display: flex;
            justify-content: center;
            align-items: center;
            flex-shrink: 0;
        }

        .insight-text h3 {
            font-size: 1.1rem;
            margin-bottom: 5px;
        }

        .insight-text p {
            font-size: 0.9rem;
            opacity: 0.8;
            line-height: 1.5;
        }

        .phase-indicators {
            display: flex;
            justify-content: space-between;
            width: 100%;
            margin-top: 20px;
        }

        .phase-indicator {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            opacity: 0.4;
            transition: var(--transition);
            cursor: pointer;
            padding: 10px;
            border-radius: 16px;
            width: 30%;
        }

        .phase-indicator.active {
            opacity: 1;
            background: rgba(255, 255, 255, 0.05);
            transform: translateY(-5px);
        }

        .phase-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.4rem;
            background: rgba(255, 255, 255, 0.1);
            transition: var(--transition);
        }

        .phase-indicator.active .phase-icon {
            background: linear-gradient(45deg, var(--accent-1), var(--accent-2));
            color: #0f0e17;
            box-shadow: 0 5px 15px rgba(255, 137, 6, 0.3);
        }

        .phase-name {
            font-size: 0.9rem;
            font-weight: 500;
            text-align: center;
        }

        .phase-time {
            font-size: 0.8rem;
            opacity: 0.7;
        }

        /* Phase-specific styles */
        .focus .phase-display {
            color: var(--accent-1);
        }
        .focus .progress-bar {
            background: linear-gradient(90deg, var(--accent-1), #ffb74d);
        }
        .focus .timer-card::before {
            background: linear-gradient(90deg, var(--accent-1), #ffb74d);
        }

        .pause .phase-display {
            color: var(--accent-4);
        }
        .pause .progress-bar {
            background: linear-gradient(90deg, var(--accent-4), #66d9a0);
        }
        .pause .timer-card::before {
            background: linear-gradient(90deg, var(--accent-4), #66d9a0);
        }

        .reflect .phase-display {
            color: var(--accent-3);
        }
        .reflect .progress-bar {
            background: linear-gradient(90deg, var(--accent-3), #f48fb1);
        }
        .reflect .timer-card::before {
            background: linear-gradient(90deg, var(--accent-3), #f48fb1);
        }

        /* Responsive design */
        @media (max-width: 600px) {
            .timer-display {
                font-size: 3.5rem;
            }
            
            .phase-display {
                font-size: 1.8rem;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 100%;
                max-width: 300px;
            }
            
            .header h1 {
                font-size: 2.4rem;
            }
        }

        @media (max-width: 400px) {
            .timer-display {
                font-size: 3rem;
            }
            
            .header h1 {
                font-size: 2rem;
            }
            
            .timer-card {
                padding: 20px;
            }
        }
    </style>
</head>
<body class="focus">
    <div class="background-pattern"></div>
    <div class="pulse-effect" id="pulseEffect"></div>
    
    <div class="container">
        <div class="header">
            <div class="logo">
                <div class="logo-circle">
                    <i class="fas fa-wave-pulse"></i>
                </div>
            </div>
            <h1>PulsePad</h1>
            <p>Your personal rhythm companion for focused living</p>
        </div>
        
        <div class="timer-card active" id="timerCard">
            <div class="phase-display">Focus</div>
            <div class="phase-description">Deep work without distractions</div>
            <div class="timer-display">40:00</div>
            
            <div class="progress-container">
                <div class="progress-bar" style="width: 100%"></div>
            </div>
            
            <div class="controls">
                <button id="startBtn" class="btn btn-primary">
                    <i class="fas fa-play"></i> Begin Flow
                </button>
                <button id="resetBtn" class="btn">
                    <i class="fas fa-redo"></i> Reset
                </button>
            </div>
            
            <div class="features">
                <div class="feature-btn" id="vibrationBtn">
                    <i class="fas fa-vibration"></i> Haptics
                </div>
                <div class="feature-btn" id="soundBtn">
                    <i class="fas fa-volume-up"></i> Sound
                </div>
            </div>
        </div>
        
        <div class="phase-indicators">
            <div class="phase-indicator active" data-phase="focus">
                <div class="phase-icon">
                    <i class="fas fa-bullseye"></i>
                </div>
                <div class="phase-name">Focus</div>
                <div class="phase-time">40:00</div>
            </div>
            <div class="phase-indicator" data-phase="pause">
                <div class="phase-icon">
                    <i class="fas fa-pause"></i>
                </div>
                <div class="phase-name">Pause</div>
                <div class="phase-time">10:00</div>
            </div>
            <div class="phase-indicator" data-phase="reflect">
                <div class="phase-icon">
                    <i class="fas fa-feather-alt"></i>
                </div>
                <div class="phase-name">Reflect</div>
                <div class="phase-time">05:00</div>
            </div>
        </div>
        
        <div class="rhythm-insights">
            <div class="insights-header">
                <h2><i class="fas fa-brain"></i> Rhythm Insights</h2>
                <div class="feature-btn">
                    <i class="fas fa-history"></i> History
                </div>
            </div>
            <div class="insight-content">
                <div class="insight-item">
                    <div class="insight-icon">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div class="insight-text">
                        <h3>Focus Patterns</h3>
                        <p>You're most productive in the morning. Try starting important tasks before noon.</p>
                    </div>
                </div>
                <div class="insight-item">
                    <div class="insight-icon">
                        <i class="fas fa-heartbeat"></i>
                    </div>
                    <div class="insight-text">
                        <h3>RhythmSync Analysis</h3>
                        <p>Your natural rhythm suggests 45 min focus sessions would be more effective.</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Proprietary RhythmSync technology
        class RhythmSync {
            constructor() {
                this.userPatterns = JSON.parse(localStorage.getItem('pulsePadRhythm')) || {
                    focusSessions: [],
                    pauseSessions: [],
                    reflectSessions: []
                };
                this.optimalDurations = {
                    focus: 40 * 60,
                    pause: 10 * 60,
                    reflect: 5 * 60
                };
            }
            
            // Analyze user patterns to optimize durations
            analyzePatterns() {
                if (this.userPatterns.focusSessions.length > 3) {
                    const avgFocus = this.userPatterns.focusSessions.reduce((a, b) => a + b, 0) / 
                                   this.userPatterns.focusSessions.length;
                    this.optimalDurations.focus = Math.min(55 * 60, Math.max(25 * 60, avgFocus * 1.1));
                }
                
                if (this.userPatterns.pauseSessions.length > 3) {
                    const avgPause = this.userPatterns.pauseSessions.reduce((a, b) => a + b, 0) / 
                                   this.userPatterns.pauseSessions.length;
                    this.optimalDurations.pause = Math.min(20 * 60, Math.max(5 * 60, avgPause * 0.9));
                }
                
                this.saveToLocalStorage();
                return this.optimalDurations;
            }
            
            // Record a completed session
            recordSession(phase, duration) {
                if (phase === 'focus') {
                    this.userPatterns.focusSessions.push(duration);
                    if (this.userPatterns.focusSessions.length > 10) this.userPatterns.focusSessions.shift();
                } else if (phase === 'pause') {
                    this.userPatterns.pauseSessions.push(duration);
                    if (this.userPatterns.pauseSessions.length > 10) this.userPatterns.pauseSessions.shift();
                } else if (phase === 'reflect') {
                    this.userPatterns.reflectSessions.push(duration);
                    if (this.userPatterns.reflectSessions.length > 10) this.userPatterns.reflectSessions.shift();
                }
                
                this.saveToLocalStorage();
            }
            
            saveToLocalStorage() {
                localStorage.setItem('pulsePadRhythm', JSON.stringify(this.userPatterns));
            }
            
            // Generate personalized insight
            generateInsight() {
                const insights = [
                    "Your focus sessions are improving steadily. Keep it up!",
                    "Try pairing your pause time with light stretching for better results.",
                    "Your rhythm shows consistency in the morning hours.",
                    "Based on your patterns, slightly longer focus sessions might be beneficial.",
                    "Your reflection quality has increased over the past week."
                ];
                
                return insights[Math.floor(Math.random() * insights.length)];
            }
        }

        // App state
        const state = {
            currentPhase: 'focus',
            timeRemaining: 40 * 60,
            timerInterval: null,
            isRunning: false,
            soundEnabled: true,
            vibrationEnabled: true,
            rhythmSync: new RhythmSync()
        };

        // DOM Elements
        const elements = {
            body: document.body,
            phaseDisplay: document.querySelector('.phase-display'),
            phaseDescription: document.querySelector('.phase-description'),
            timerDisplay: document.querySelector('.timer-display'),
            progressBar: document.querySelector('.progress-bar'),
            startBtn: document.getElementById('startBtn'),
            resetBtn: document.getElementById('resetBtn'),
            soundBtn: document.getElementById('soundBtn'),
            vibrationBtn: document.getElementById('vibrationBtn'),
            timerCard: document.getElementById('timerCard'),
            pulseEffect: document.getElementById('pulseEffect'),
            phaseIndicators: document.querySelectorAll('.phase-indicator')
        };

        // Phase configurations
        const phases = {
            focus: {
                name: 'Focus',
                description: 'Deep work without distractions',
                duration: state.rhythmSync.optimalDurations.focus,
                color: '#ff8906'
            },
            pause: {
                name: 'Pause',
                description: 'Step back and recharge',
                duration: state.rhythmSync.optimalDurations.pause,
                color: '#2cb67d'
            },
            reflect: {
                name: 'Reflect',
                description: 'Process and internalize',
                duration: state.rhythmSync.optimalDurations.reflect,
                color: '#e53170'
            }
        };

        // Initialize the app
        function init() {
            loadPreferences();
            updateTimerDisplay();
            setupEventListeners();
            createPulseEffects();
            
            // Apply optimized durations
            document.querySelector('[data-phase="focus"] .phase-time').textContent = 
                formatTime(phases.focus.duration);
            document.querySelector('[data-phase="pause"] .phase-time').textContent = 
                formatTime(phases.pause.duration);
            document.querySelector('[data-phase="reflect"] .phase-time').textContent = 
                formatTime(phases.reflect.duration);
        }

        // Create background pulse effects
        function createPulseEffects() {
            const colors = ['#ff8906', '#e53170', '#2cb67d'];
            for (let i = 0; i < 6; i++) {
                const circle = document.createElement('div');
                circle.classList.add('pulse-circle');
                
                // Random properties
                const size = Math.random() * 100 + 50;
                const color = colors[Math.floor(Math.random() * colors.length)];
                const left = Math.random() * 100;
                const top = Math.random() * 100;
                const delay = Math.random() * 5;
                
                circle.style.width = `${size}px`;
                circle.style.height = `${size}px`;
                circle.style.background = `radial-gradient(circle, ${color}, transparent)`;
                circle.style.left = `${left}%`;
                circle.style.top = `${top}%`;
                circle.style.animationDelay = `${delay}s`;
                
                elements.pulseEffect.appendChild(circle);
            }
        }

        // Load user preferences
        function loadPreferences() {
            const savedSound = localStorage.getItem('pulsePadSound');
            const savedVibration = localStorage.getItem('pulsePadVibration');
            
            if (savedSound !== null) {
                state.soundEnabled = savedSound === 'true';
                elements.soundBtn.classList.toggle('active', state.soundEnabled);
            }
            
            if (savedVibration !== null) {
                state.vibrationEnabled = savedVibration === 'true';
                elements.vibrationBtn.classList.toggle('active', state.vibrationEnabled);
            }
        }

        // Set up event listeners
        function setupEventListeners() {
            elements.startBtn.addEventListener('click', toggleTimer);
            elements.resetBtn.addEventListener('click', resetTimer);
            
            elements.soundBtn.addEventListener('click', () => {
                state.soundEnabled = !state.soundEnabled;
                elements.soundBtn.classList.toggle('active', state.soundEnabled);
                localStorage.setItem('pulsePadSound', state.soundEnabled);
                
                // Play confirmation sound
                if (state.soundEnabled) playSoftTone();
            });
            
            elements.vibrationBtn.addEventListener('click', () => {
                state.vibrationEnabled = !state.vibrationEnabled;
                elements.vibrationBtn.classList.toggle('active', state.vibrationEnabled);
                localStorage.setItem('pulsePadVibration', state.vibrationEnabled);
                
                // Trigger confirmation vibration
                if (state.vibrationEnabled && 'vibrate' in navigator) {
                    navigator.vibrate(100);
                }
            });
            
            elements.phaseIndicators.forEach(indicator => {
                indicator.addEventListener('click', () => {
                    const phase = indicator.dataset.phase;
                    
                    // Update active indicator
                    elements.phaseIndicators.forEach(i => i.classList.remove('active'));
                    indicator.classList.add('active');
                    
                    // Update phase
                    state.currentPhase = phase;
                    state.timeRemaining = phases[phase].duration;
                    updateTimerDisplay();
                    elements.body.className = phase;
                });
            });
        }

        // Toggle timer
        function toggleTimer() {
            if (state.isRunning) {
                pauseTimer();
            } else {
                startTimer();
            }
        }

        // Start the timer
        function startTimer() {
            state.isRunning = true;
            elements.startBtn.innerHTML = '<i class="fas fa-pause"></i> Pause Flow';
            elements.timerCard.classList.add('active');
            
            state.timerInterval = setInterval(() => {
                state.timeRemaining--;
                updateTimerDisplay();
                
                if (state.timeRemaining <= 0) {
                    nextPhase();
                }
            }, 1000);
        }

        // Pause the timer
        function pauseTimer() {
            state.isRunning = false;
            clearInterval(state.timerInterval);
            elements.startBtn.innerHTML = '<i class="fas fa-play"></i> Resume Flow';
            elements.timerCard.classList.remove('active');
        }

        // Reset the timer
        function resetTimer() {
            pauseTimer();
            state.timeRemaining = phases[state.currentPhase].duration;
            updateTimerDisplay();
        }

        // Move to next phase
        function nextPhase() {
            // Record completed session
            const completedDuration = phases[state.currentPhase].duration - state.timeRemaining;
            state.rhythmSync.recordSession(state.currentPhase, completedDuration);
            
            // Trigger sensory feedback
            triggerFeedback();
            
            // Determine next phase
            const phaseOrder = ['focus', 'pause', 'reflect'];
            const currentIndex = phaseOrder.indexOf(state.currentPhase);
            const nextIndex = (currentIndex + 1) % phaseOrder.length;
            const nextPhase = phaseOrder[nextIndex];
            
            // Update state
            state.currentPhase = nextPhase;
            state.timeRemaining = phases[nextPhase].duration;
            
            // Update UI
            updateTimerDisplay();
            elements.body.className = nextPhase;
            
            // Update active indicator
            elements.phaseIndicators.forEach(i => i.classList.remove('active'));
            document.querySelector(`[data-phase="${nextPhase}"]`).classList.add('active');
            
            // Re-apply optimized durations
            const optimized = state.rhythmSync.analyzePatterns();
            phases.focus.duration = optimized.focus;
            phases.pause.duration = optimized.pause;
            phases.reflect.duration = optimized.reflect;
            
            // Update phase times display
            document.querySelector('[data-phase="focus"] .phase-time').textContent = 
                formatTime(phases.focus.duration);
            document.querySelector('[data-phase="pause"] .phase-time').textContent = 
                formatTime(phases.pause.duration);
            document.querySelector('[data-phase="reflect"] .phase-time').textContent = 
                formatTime(phases.reflect.duration);
        }

        // Trigger sensory feedback
        function triggerFeedback() {
            // Sound feedback
            if (state.soundEnabled) {
                playSoftTone();
            }
            
            // Vibration feedback
            if (state.vibrationEnabled && 'vibrate' in navigator) {
                navigator.vibrate([200, 100, 200]);
            }
            
            // Visual feedback
            animatePhaseTransition();
        }

        // Play a soft tone
        function playSoftTone() {
            const context = new (window.AudioContext || window.webkitAudioContext)();
            const oscillator = context.createOscillator();
            const gainNode = context.createGain();
            
            oscillator.type = 'sine';
            
            // Different frequencies for different phases
            if (state.currentPhase === 'focus') {
                oscillator.frequency.setValueAtTime(523.25, context.currentTime); // C5
            } else if (state.currentPhase === 'pause') {
                oscillator.frequency.setValueAtTime(392.00, context.currentTime); // G4
            } else {
                oscillator.frequency.setValueAtTime(329.63, context.currentTime); // E4
            }
            
            gainNode.gain.setValueAtTime(0.3, context.currentTime);
            
            oscillator.connect(gainNode);
            gainNode.connect(context.destination);
            
            oscillator.start();
            gainNode.gain.exponentialRampToValueAtTime(0.001, context.currentTime + 0.8);
            oscillator.stop(context.currentTime + 0.8);
        }

        // Animate phase transition
        function animatePhaseTransition() {
            elements.timerCard.animate([
                { transform: 'scale(1)', opacity: 1 },
                { transform: 'scale(0.95)', opacity: 0.7 },
                { transform: 'scale(1)', opacity: 1 }
            ], {
                duration: 500,
                easing: 'ease-out'
            });
        }

        // Update timer display
        function updateTimerDisplay() {
            const minutes = Math.floor(state.timeRemaining / 60);
            const seconds = state.timeRemaining % 60;
            elements.timerDisplay.textContent = `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            // Update progress bar
            const phaseDuration = phases[state.currentPhase].duration;
            const progress = (phaseDuration - state.timeRemaining) / phaseDuration;
            elements.progressBar.style.width = `${progress * 100}%`;
            
            // Update phase display
            elements.phaseDisplay.textContent = phases[state.currentPhase].name;
            elements.phaseDescription.textContent = phases[state.currentPhase].description;
        }

        // Format time for display
        function formatTime(seconds) {
            const minutes = Math.floor(seconds / 60);
            return `${minutes.toString().padStart(2, '0')}:00`;
        }

        // Initialize the app
        window.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>